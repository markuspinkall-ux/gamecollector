<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GameCollector</title>

<style>
body{
margin:0;
font-family:Arial, sans-serif;
color:white;
overflow-x:hidden;
background:#000;
}

/* Canvas */
#bg{
position:fixed;
top:0;
left:0;
width:100%;
height:100%;
z-index:-1;
}

/* Layout */
header,.controls,#library{
position:relative;
z-index:2;
}

header{
background:rgba(20,20,30,0.9);
padding:15px;
display:flex;
justify-content:space-between;
align-items:center;
flex-wrap:wrap;
gap:10px;
}

.controls{
background:rgba(20,20,30,0.9);
padding:15px;
display:flex;
flex-wrap:wrap;
gap:10px;
}

input,select{
padding:8px;
border:none;
border-radius:6px;
background:#2C2F33;
color:white;
}

button{
padding:8px 10px;
border:none;
border-radius:6px;
cursor:pointer;
background:#ff00aa;
color:white;
}

.system-section{
padding:20px;
}

.carousel{
display:flex;
gap:15px;
overflow-x:auto;
}

.card{
min-width:160px;
background:#111;
border-radius:12px;
overflow:hidden;
border:1px solid #ff00aa;
display:flex;
flex-direction:column;
}

.card img{
width:100%;
height:220px;
object-fit:cover;
}

.card-title{
padding:8px;
text-align:center;
}
</style>
</head>

<body>

<canvas id="bg"></canvas>

<header>
<h2>ðŸŽ® GameCollector</h2>
<input id="search" placeholder="Suchen..." oninput="render()">
</header>

<div class="controls">
<input id="title" placeholder="Titel">
<select id="system">
<option value="">System wÃ¤hlen</option>
<option>NES</option>
<option>SNES</option>
<option>PS1</option>
<option>PS2</option>
<option>Xbox</option>
<option>PC</option>
</select>
<input type="file" id="coverUpload" accept="image/*">
<button onclick="addGame()">HinzufÃ¼gen</button>
</div>

<div id="library"></div>

<script>

/* =========================
   BACKGROUND (STABIL)
========================= */

const canvas = document.getElementById("bg");
const ctx = canvas.getContext("2d");

function resize(){
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;
}
resize();
window.addEventListener("resize", resize);

let stars = [];

function createStars(){
stars = [];
for(let i=0;i<150;i++){
stars.push({
x:Math.random()*canvas.width,
y:Math.random()*canvas.height,
size:Math.random()*2,
speed:Math.random()*0.6+0.2
});
}
}
createStars();

function animate(){

ctx.clearRect(0,0,canvas.width,canvas.height);

// Gradient
let gradient = ctx.createLinearGradient(0,0,0,canvas.height);
gradient.addColorStop(0,"#1a0033");
gradient.addColorStop(1,"#000");
ctx.fillStyle = gradient;
ctx.fillRect(0,0,canvas.width,canvas.height);

// Stars
ctx.fillStyle="white";
stars.forEach(star=>{
ctx.fillRect(star.x,star.y,star.size,star.size);
star.y += star.speed;
if(star.y > canvas.height){
star.y = 0;
star.x = Math.random()*canvas.width;
}
});

requestAnimationFrame(animate);
}

animate();

/* =========================
   GAME LOGIC
========================= */

let games = JSON.parse(localStorage.getItem("games")) || [];

function save(){
localStorage.setItem("games",JSON.stringify(games));
}

function addGame(){
let t = title.value;
let s = system.value;
let file = coverUpload.files[0];

if(!t || !s){
alert("Titel & System nÃ¶tig");
return;
}

if(file){
let reader = new FileReader();
reader.onload = e=>{
games.push({id:Date.now(),title:t,system:s,cover:e.target.result});
save();
render();
};
reader.readAsDataURL(file);
}else{
games.push({id:Date.now(),title:t,system:s,cover:""});
save();
render();
}

title.value="";
coverUpload.value="";
}

function render(){
let lib=document.getElementById("library");
lib.innerHTML="";

let filtered = games.filter(g =>
g.title.toLowerCase().includes(search.value.toLowerCase())
);

let systems = [...new Set(filtered.map(g=>g.system))];

systems.forEach(sys=>{
let sec=document.createElement("div");
sec.className="system-section";
sec.innerHTML=`<h3>${sys}</h3><div class="carousel"></div>`;
lib.appendChild(sec);

let car=sec.querySelector(".carousel");

filtered.filter(g=>g.system===sys)
.sort((a,b)=>a.title.localeCompare(b.title))
.forEach(g=>{
car.innerHTML+=`
<div class="card">
${g.cover?`<img src="${g.cover}">`:''}
<div class="card-title">${g.title}</div>
</div>`;
});
});
}

render();

</script>

</body>
</html>